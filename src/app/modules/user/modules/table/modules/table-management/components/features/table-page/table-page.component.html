<ng-container *ngIf="table$ | async as table">
  <div
    class="table-description"
    [ngStyle]="{
      'background-image':
        'linear-gradient(to bottom, rgba(11, 32, 47, 1) 0%, rgba(11, 32, 47, 0)66%), ' 
        + 'url(' +table.avatar +')'
    }"
  >
    <app-return-button></app-return-button>
    <app-page-header
      [title]="table.name"
    ></app-page-header>
  </div>
  <app-custom-button
    [style]="'gold'"
    [name]="'Disponibilités des participants'"
    [routerLink]="['shared-calendar']"
  ></app-custom-button>
  <ng-container *ngIf="participantList$ | async as participants">
    <p-accordion [activeIndex]="">
      <p-accordionTab header="Liste des joueurs">
        <app-list-of-element
          [elementList]="participants"
          [elementIcon]="'assets/images/character-icon.svg'"
          [replacementIcon]="'assets/images/hourglass-icon.svg'"
        ></app-list-of-element>
        @if(userAllowed.id == table.userId) {
        <app-custom-add-button
          [routerLink]="'new-player'"
        ></app-custom-add-button>
        <app-custom-button
          [style]="'gold'"
          [name]="'Persos à valider'"
          [routerLink]="'accept-characters'"
        ></app-custom-button>
        }
      </p-accordionTab>
      @if(userAllowed.id == table.userId) {
      <p-accordionTab header="Discussions avec les joueurs">
        <ng-container *ngIf="chatList$ | async as chatList">
          <app-list-of-element
            [elementList]="chatList"
            [elementIcon]="'assets/images/discussion-icon.svg'"
          ></app-list-of-element>
        </ng-container>
        <app-custom-add-button></app-custom-add-button>
      </p-accordionTab>
      }
      <p-accordionTab header="Dessins">
        <ng-container *ngIf="drawingList$ | async as drawingList">
          <app-list-of-element
            [elementList]="drawingList"
            [elementIcon]="'assets/images/brush-icon.svg'"
            (sendDrawingUrl)="showDrawing($event)"
            [isForDrawing]="true"
          ></app-list-of-element>
        </ng-container>
        <app-custom-add-button
          [routerLink]="'new-drawing'"
        ></app-custom-add-button>
      </p-accordionTab>
    </p-accordion>
    <footer class="bottom-part">
      @if(userAllowed.id == table.userId) {
      <app-custom-button
        [style]="'gold'"
        [name]="'Reprendre cette partie'"
      ></app-custom-button>
      } @if(isDrawingVisible) {
      <app-drawing-display
        (isDrawingVisible)="toggleDrawingVisible($event)"
        [drawingToShow]="drawingToShow"
      ></app-drawing-display>
      }
    </footer>
  </ng-container>
</ng-container>
